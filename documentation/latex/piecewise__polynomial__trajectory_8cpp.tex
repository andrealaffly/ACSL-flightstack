\hypertarget{piecewise__polynomial__trajectory_8cpp}{}\doxysection{ACSL-\/flightstack/src/user\+\_\+defined\+\_\+trajectory/piecewise\+\_\+polynomial\+\_\+trajectory.cpp File Reference}
\label{piecewise__polynomial__trajectory_8cpp}\index{ACSL-\/flightstack/src/user\_defined\_trajectory/piecewise\_polynomial\_trajectory.cpp@{ACSL-\/flightstack/src/user\_defined\_trajectory/piecewise\_polynomial\_trajectory.cpp}}


Piecewise polynomial minimu-\/jerk trajectory computed offline through a MATLAB script.  


{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$nlohmann/json.\+hpp$>$}\newline
{\ttfamily \#include \char`\"{}piecewise\+\_\+polynomial\+\_\+trajectory.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}multi\+\_\+threaded\+\_\+node.\+hpp\char`\"{}}\newline
Include dependency graph for piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{piecewise__polynomial__trajectory_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ Eigen\+::\+Matrix\+Xd $>$ \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_a5b79ff28592c6c6f668397c1b6b2425d}{poly\+Coef\+Assigning}} (const std\+::vector$<$ std\+::vector$<$ double $>$$>$ \&poly\+\_\+coeff\+\_\+matrix\+\_\+in)
\begin{DoxyCompactList}\small\item\em Function to assign polynomisl coefficients to designated variables. \end{DoxyCompactList}\item 
Eigen\+::\+Matrix\+Xd \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_ad78396103d660d70670cb0379d817304}{poly\+Der\+Matrix}} (const Eigen\+::\+Matrix\+Xd \&poly\+\_\+coeff\+\_\+matrix\+\_\+in)
\begin{DoxyCompactList}\small\item\em Function to compute the derivative of the piecewise polynomial coefficient matrix. \end{DoxyCompactList}\item 
std\+::pair$<$ double, int $>$ \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_a9e073222d460994fa50b85f98dd607f2}{polynomial\+Time\+Adjusted}} (const std\+::vector$<$ double $>$ \&time\+\_\+waypoint\+\_\+vector, double time)
\begin{DoxyCompactList}\small\item\em Adjusts the time to be fed to the various polynomials and identifies the segment of the trajectory. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_a8e5d7b4960a313c2e2e526db7e0b59fc}{evaluate\+Polynomial}} (const Eigen\+::\+Vector\+Xd \&coefficients, double value)
\begin{DoxyCompactList}\small\item\em Functio to evaluate a polynomial given its coefficients and a value at which to evaluate the polynomial. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_a9e21c51abfa867e99eec3fa92b582427}{norm2D}} (const Eigen\+::\+Vector\+Xd \&poly\+\_\+coef\+\_\+x, const Eigen\+::\+Vector\+Xd \&poly\+\_\+coef\+\_\+y, double t)
\begin{DoxyCompactList}\small\item\em Computed the 2D norm using polynomial coefficients. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_ac4279483f559b107d8983354b37f0ddd}{norm2\+Dderivative}} (const Eigen\+::\+Vector\+Xd \&poly\+\_\+coef\+\_\+x, const Eigen\+::\+Vector\+Xd \&poly\+\_\+coef\+\_\+y, const Eigen\+::\+Vector\+Xd \&poly\+\_\+coef\+\_\+x\+\_\+prime, const Eigen\+::\+Vector\+Xd \&poly\+\_\+coef\+\_\+y\+\_\+prime, double t)
\begin{DoxyCompactList}\small\item\em Compute the derivative of the 2D norm using polynomial coefficients and their derivatives. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_a945bcfe8dadfcf84ddb1a9117670eb22}{yaw\+Computation}} (const Eigen\+::\+Vector\+Xd \&Vx\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Vy\+\_\+coef, double t)
\begin{DoxyCompactList}\small\item\em Compute the user-\/defined yaw from the trajectory velocity in the XY plane. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_aef28200ec3c1fb1475dba9887492046f}{yaw\+Dot\+Computation}} (const Eigen\+::\+Vector\+Xd \&Vx\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Vy\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Ax\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Ay\+\_\+coef, double t)
\begin{DoxyCompactList}\small\item\em Compute the user-\/defined yaw\+\_\+dot from the trajecotry velocity in the XY plane. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{piecewise__polynomial__trajectory_8cpp_a21eadf420a96cc47cebc437625c325a6}{yaw\+Dot\+Dot\+Computation}} (const Eigen\+::\+Vector\+Xd \&Vx\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Vy\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Ax\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Ay\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Jx\+\_\+coef, const Eigen\+::\+Vector\+Xd \&Jy\+\_\+coef, double t)
\begin{DoxyCompactList}\small\item\em Compute the user-\/defined yaw\+\_\+dot\+\_\+dot from the trajectory velocity in the XY plane. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Piecewise polynomial minimu-\/jerk trajectory computed offline through a MATLAB script. 

File\+: piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp ~\newline
 Author\+: Mattia Gramuglia ~\newline
 Date\+: April 15, 2024 ~\newline
 For info\+: Andrea L\textquotesingle{}Afflitto ~\newline
 \href{mailto:a.lafflitto@vt.edu}{\texttt{ a.\+lafflitto@vt.\+edu}}

Description\+: Piecewise polynomial minimu-\/jerk trajectory computed offline through a MATLAB script. The heading (yaw) angle is kept tangential to the trajectory in the X-\/Y plane and computed online along with its first and second derivative.

Git\+Hub\+: \href{https://github.com/andrealaffly/ACSL-flightstack.git}{\texttt{ https\+://github.\+com/andrealaffly/\+ACSL-\/flightstack.\+git}}

The heading (yaw) angle is kept tangential to the trajectory in the X-\/Y plane and computed online along with its first and second derivative. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_a8e5d7b4960a313c2e2e526db7e0b59fc}\label{piecewise__polynomial__trajectory_8cpp_a8e5d7b4960a313c2e2e526db7e0b59fc}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!evaluatePolynomial@{evaluatePolynomial}}
\index{evaluatePolynomial@{evaluatePolynomial}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{evaluatePolynomial()}{evaluatePolynomial()}}
{\footnotesize\ttfamily double evaluate\+Polynomial (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Vector\+Xd \&}]{coefficients,  }\item[{double}]{value }\end{DoxyParamCaption})}



Functio to evaluate a polynomial given its coefficients and a value at which to evaluate the polynomial. 


\begin{DoxyParams}{Parameters}
{\em coefficients} & \\
\hline
{\em value} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double 
\end{DoxyReturn}


Definition at line 453 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_a9e21c51abfa867e99eec3fa92b582427}\label{piecewise__polynomial__trajectory_8cpp_a9e21c51abfa867e99eec3fa92b582427}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!norm2D@{norm2D}}
\index{norm2D@{norm2D}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{norm2D()}{norm2D()}}
{\footnotesize\ttfamily double norm2D (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Vector\+Xd \&}]{poly\+\_\+coef\+\_\+x,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{poly\+\_\+coef\+\_\+y,  }\item[{double}]{t }\end{DoxyParamCaption})}



Computed the 2D norm using polynomial coefficients. 


\begin{DoxyParams}{Parameters}
{\em poly\+\_\+coef\+\_\+x} & \\
\hline
{\em poly\+\_\+coef\+\_\+y} & \\
\hline
{\em t} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double 
\end{DoxyReturn}


Definition at line 472 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_ac4279483f559b107d8983354b37f0ddd}\label{piecewise__polynomial__trajectory_8cpp_ac4279483f559b107d8983354b37f0ddd}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!norm2Dderivative@{norm2Dderivative}}
\index{norm2Dderivative@{norm2Dderivative}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{norm2Dderivative()}{norm2Dderivative()}}
{\footnotesize\ttfamily double norm2\+Dderivative (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Vector\+Xd \&}]{poly\+\_\+coef\+\_\+x,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{poly\+\_\+coef\+\_\+y,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{poly\+\_\+coef\+\_\+x\+\_\+prime,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{poly\+\_\+coef\+\_\+y\+\_\+prime,  }\item[{double}]{t }\end{DoxyParamCaption})}



Compute the derivative of the 2D norm using polynomial coefficients and their derivatives. 


\begin{DoxyParams}{Parameters}
{\em poly\+\_\+coef\+\_\+x} & \\
\hline
{\em poly\+\_\+coef\+\_\+y} & \\
\hline
{\em poly\+\_\+coef\+\_\+x\+\_\+prime} & \\
\hline
{\em poly\+\_\+coef\+\_\+y\+\_\+prime} & \\
\hline
{\em t} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double 
\end{DoxyReturn}


Definition at line 490 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_a5b79ff28592c6c6f668397c1b6b2425d}\label{piecewise__polynomial__trajectory_8cpp_a5b79ff28592c6c6f668397c1b6b2425d}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!polyCoefAssigning@{polyCoefAssigning}}
\index{polyCoefAssigning@{polyCoefAssigning}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{polyCoefAssigning()}{polyCoefAssigning()}}
{\footnotesize\ttfamily std\+::vector$<$Eigen\+::\+Matrix\+Xd$>$ poly\+Coef\+Assigning (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ std\+::vector$<$ double $>$$>$ \&}]{poly\+\_\+coeff\+\_\+matrix\+\_\+in }\end{DoxyParamCaption})}



Function to assign polynomisl coefficients to designated variables. 

Auxillary functions


\begin{DoxyParams}{Parameters}
{\em poly\+\_\+coeff\+\_\+matrix\+\_\+in} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::vector$<$\+Eigen\+::\+Matrix\+Xd$>$ 
\end{DoxyReturn}


Definition at line 367 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_ad78396103d660d70670cb0379d817304}\label{piecewise__polynomial__trajectory_8cpp_ad78396103d660d70670cb0379d817304}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!polyDerMatrix@{polyDerMatrix}}
\index{polyDerMatrix@{polyDerMatrix}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{polyDerMatrix()}{polyDerMatrix()}}
{\footnotesize\ttfamily Eigen\+::\+Matrix\+Xd poly\+Der\+Matrix (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Matrix\+Xd \&}]{poly\+\_\+coeff\+\_\+matrix\+\_\+in }\end{DoxyParamCaption})}



Function to compute the derivative of the piecewise polynomial coefficient matrix. 


\begin{DoxyParams}{Parameters}
{\em poly\+\_\+coeff\+\_\+matrix\+\_\+in} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Eigen\+::\+Matrix\+Xd 
\end{DoxyReturn}


Definition at line 401 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_a9e073222d460994fa50b85f98dd607f2}\label{piecewise__polynomial__trajectory_8cpp_a9e073222d460994fa50b85f98dd607f2}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!polynomialTimeAdjusted@{polynomialTimeAdjusted}}
\index{polynomialTimeAdjusted@{polynomialTimeAdjusted}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{polynomialTimeAdjusted()}{polynomialTimeAdjusted()}}
{\footnotesize\ttfamily std\+::pair$<$double, int$>$ polynomial\+Time\+Adjusted (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ double $>$ \&}]{time\+\_\+waypoint\+\_\+vector,  }\item[{double}]{time }\end{DoxyParamCaption})}



Adjusts the time to be fed to the various polynomials and identifies the segment of the trajectory. 


\begin{DoxyParams}{Parameters}
{\em time\+\_\+waypoint\+\_\+vector} & \\
\hline
{\em time} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::pair$<$double, int$>$ 
\end{DoxyReturn}


Definition at line 428 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_a945bcfe8dadfcf84ddb1a9117670eb22}\label{piecewise__polynomial__trajectory_8cpp_a945bcfe8dadfcf84ddb1a9117670eb22}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!yawComputation@{yawComputation}}
\index{yawComputation@{yawComputation}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{yawComputation()}{yawComputation()}}
{\footnotesize\ttfamily double yaw\+Computation (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Vector\+Xd \&}]{Vx\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Vy\+\_\+coef,  }\item[{double}]{t }\end{DoxyParamCaption})}



Compute the user-\/defined yaw from the trajectory velocity in the XY plane. 


\begin{DoxyParams}{Parameters}
{\em Vx\+\_\+coef} & \\
\hline
{\em Vy\+\_\+coef} & \\
\hline
{\em t} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double 
\end{DoxyReturn}


Definition at line 512 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_aef28200ec3c1fb1475dba9887492046f}\label{piecewise__polynomial__trajectory_8cpp_aef28200ec3c1fb1475dba9887492046f}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!yawDotComputation@{yawDotComputation}}
\index{yawDotComputation@{yawDotComputation}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{yawDotComputation()}{yawDotComputation()}}
{\footnotesize\ttfamily double yaw\+Dot\+Computation (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Vector\+Xd \&}]{Vx\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Vy\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Ax\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Ay\+\_\+coef,  }\item[{double}]{t }\end{DoxyParamCaption})}



Compute the user-\/defined yaw\+\_\+dot from the trajecotry velocity in the XY plane. 


\begin{DoxyParams}{Parameters}
{\em Vx\+\_\+coef} & \\
\hline
{\em Vy\+\_\+coef} & \\
\hline
{\em Ax\+\_\+coef} & \\
\hline
{\em Ay\+\_\+coef} & \\
\hline
{\em t} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double 
\end{DoxyReturn}


Definition at line 535 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

\mbox{\Hypertarget{piecewise__polynomial__trajectory_8cpp_a21eadf420a96cc47cebc437625c325a6}\label{piecewise__polynomial__trajectory_8cpp_a21eadf420a96cc47cebc437625c325a6}} 
\index{piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}!yawDotDotComputation@{yawDotDotComputation}}
\index{yawDotDotComputation@{yawDotDotComputation}!piecewise\_polynomial\_trajectory.cpp@{piecewise\_polynomial\_trajectory.cpp}}
\doxysubsubsection{\texorpdfstring{yawDotDotComputation()}{yawDotDotComputation()}}
{\footnotesize\ttfamily double yaw\+Dot\+Dot\+Computation (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Vector\+Xd \&}]{Vx\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Vy\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Ax\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Ay\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Jx\+\_\+coef,  }\item[{const Eigen\+::\+Vector\+Xd \&}]{Jy\+\_\+coef,  }\item[{double}]{t }\end{DoxyParamCaption})}



Compute the user-\/defined yaw\+\_\+dot\+\_\+dot from the trajectory velocity in the XY plane. 


\begin{DoxyParams}{Parameters}
{\em Vx\+\_\+coef} & \\
\hline
{\em Vy\+\_\+coef} & \\
\hline
{\em Ax\+\_\+coef} & \\
\hline
{\em Ay\+\_\+coef} & \\
\hline
{\em Jx\+\_\+coef} & \\
\hline
{\em Jy\+\_\+coef} & \\
\hline
{\em t} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double 
\end{DoxyReturn}


Definition at line 571 of file piecewise\+\_\+polynomial\+\_\+trajectory.\+cpp.

